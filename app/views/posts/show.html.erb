<p><strong>Status:</strong> <%= @post.post_status %></p>
<p><strong>Open Posts:</strong> <%= @post.course %></p>
<p><strong>Tag:</strong> <%= @post.tag %></p>
<p><strong>Bio:</strong> <%= @post.text %></p>
<p>
  <strong>Capacity:</strong> 
  <%= @post.student_attend_posts.where(apply_status: 'accepted').count + 1 %> / <%= @post.capacity %>
</p>

<% if @post.post_status == "open" %>
  <%= button_to "Request to Join", apply_post_path(@post), method: :post, class: "btn btn-primary" %>
<% end %>

<!-- Display members list to accepted students and the creator -->
<% if @post.students.include?(current_student) || @post.creator == current_student %>
  <h3>Members:</h3>
  <p><%= link_to @post.creator.name, student_path(@post.creator) %></p>
  <% @post.student_attend_posts.where(apply_status: 'accepted').each do |application| %>
    <p><%= link_to application.student.name, student_path(application.student) %></p>
  <% end %>
<% end %>

<!-- Display accept/reject options to the creator -->
<% if @post.creator == current_student %>
  <% @post.student_attend_posts.where(apply_status: "pending").each do |application| %>
    <div class="applicant-row">
      <% applicant = application.student %>
      <%= link_to applicant.name, student_path(applicant), class: "applicant-name" %>
      <div class="buttons">
        <%= button_to 'Accept', accept_application_path(application), method: :post, class: "btn-accept" %>
        <%= button_to 'Reject', reject_application_path(application), method: :post, class: "btn-reject" %>
      </div>
    </div>
  <% end %>
<% end %>